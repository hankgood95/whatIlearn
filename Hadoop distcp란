distcp란?
distcp는 hadoop에서 대규모 데이터 이동을 위해 사용하는 기능이라고 한다.
기존에는 cp를 이용해서 파일 하나씩 복사를 했다면 distcp는 데이터 세트를 작게 나누어 병렬처리로 전송하는 방식으로 전송을 하게 되어
데이터 전송이 훨씬 빠르고 효율적이다.

이를 사용하는 이유는 대량의 데이터를 동일 cluster 내 혹은 다른 cluster에 데이터를 전송할때 주로 사용하는 hadoop의 도구이다.

다른 cluster로 데이터를 이동시키는건 사실 이해가 간다.

하지만 동일 cluster내에서 datanode로 데이터를 이동시킨다는 개념이 이해가 가지 않았다.
왜냐면 동일 cluster 내라면 여러개의 datanode로 데이터가 분산처리되어 저장이 되는데 같은 cluster 내에 있는 datanode로 데이터를 이동시킨다고하니 
이해가 가지 않았다.

그래서 동일 cluster 내에서 데이터 이동을 하는 이유에알아보게 되었다.

알아보니 동일 cluster내의 데이터를 이동하는 여러 이유가 있을수 있지만 크게 2가지 정도로 나뉜다고 한다.

1. datanode의 재조정으로 인한 데이터 전송
2. 사용자 지정으로 인한 특정 datanode로의 데이터 전송

1번 같은 경우는 datanode가 데이터가 항상 일정하게 적재가 되는것이 아니라고 한다. 따라서 워크로드를 분산 시킬 필요가 있어
datanode의 재조정을 하게 되는데 이럴때 distcp를 사용할수 있다고 한다.
2번 같은 경우는 특정 datanode에 데이터 적재가 필요할수가 있는데 그럴때 동일 cluster 내의 datanode로 데이터를 보낸다고 한다.

그렇담 이제 distcp를 사용하는 방법에 대해서 알아보자.


distcp 사용법

hadoop distcp [options] 보낼파일경로 받을파일경로

이렇게 사용한다고 한다 그렇담 이제 distcp의 옵션에 대해서 알아보자.


distcp 옵션들

-update: 이 옵션은 DistCp에게 대상 디렉토리에 존재하지 않거나 대상 디렉토리에 있는 파일보다 최신인 파일만 복사하도록 지시하는 명령어이다.
         이는 새 파일이나 수정된 파일만 복사해야 할때 업데이트에 유용하다.
         
-skipcrccheck: 기본적으로 DistCp는 전송 중에 각 파일의 체크섬을 확인하여 파일이 올바르게 복사되었는지 확인한다
               이 옵션은 경우에 따라 전송 속도를 높일 수 있는 체크섬 확인을 비활성화합니다.
               
-overwrite: 이 옵션은 해당 파일이 이미 존재하는 경우 대상 디렉토리에 파일을 덮어쓰도록 지시하는거다. 
            이 옵션을 지정하지 않으면 DistCp는 대상 디렉터리에 이미 있는 파일을 건너뛰고 복사한다.
            
-delete: 이 옵션은 DistCp에게 원본 디렉터리에 없는 파일을 대상 디렉터리에서 삭제하도록 하는거다.
         이는 대상 디렉토리를 소스 디렉토리와 동기화 상태로 유지하는 데 유용하다.
         
-bandwidth: 이 옵션은 데이터 전송에 사용할 최대 대역폭(초당 바이트 수)을 설정하는 명령어다. 
            이는 클러스터에서 실행 중인 다른 애플리케이션에 대한 전송의 영향을 제한하는 데 유용하다.
            
-m: 이 옵션은 전송에 사용할 맵 작업 수를 설정한다. 
    맵 작업의 수를 늘리면 전송을 병렬화하고 속도를 높이는 데 도움이 될 수 있지만 클러스터의 부하도 증가할 수 있다.
    
-filters: 이 옵션을 사용하면 전송에 포함하거나 제외할 파일 경로 패턴 목록을 지정할 수 있다. 
          예를 들어 이 옵션을 사용하여 전송에서 임시 파일이나 로그 파일을 제외할 수 있다.

